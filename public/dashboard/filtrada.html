<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../css/style.css" />
    <link rel="stylesheet" href="../css/dash.css" />
    <link rel="stylesheet" href="../css/dash_prin-filt.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../js/sessao.js"></script>
    <link rel="icon" href="../assets/logo.png">
    <title>Dashboard Filtrada</title>
  </head>
  <body>
    <section class="filtrada">
      <div class="menu">
        <div class="logo">
          <img src="../assets/logo.png" alt="logo infinity" />
          <h2 style="font-weight: lighter">
            INFINITY <b style="font-weight: normal">SOLUTIONS</b>
          </h2>
        </div>
        <div class="opcoes">
          <a href="./dashboard.html">PRINCIPAL</a>
          <a href="./filtrada.html">FILTRADA</a>
          <a href="./relatorio_ia.html">RELATÓRIOS</a>
          <a href="./dash_cadastro.html">CADASTRO</a>
          <a href="./cad_turmas.html">TURMAS</a>
          <span class="help">
            <a href="./edit_perfil.html">CONFIGURAÇÕES</a>
            <a href="#">SUPORTE</a>
          </span>
          <a onclick="sair()">ENCERRAR SESSÃO</a>
        </div>
      </div>
      <div class="content">
        <div class="navdash">
          <span class="titulo"> DASHBOARD <b>FILTRADA</b> </span>
          <div class="navdash-menu">
            <img src="../assets/tomas.png" alt="" class="img-navbar-menu" />
            <span>Tomás Galleno</span>
            <button class="btn-navbar-menu">
              <img src="../assets/downArrow.png" alt="" />
            </button>
          </div>
        </div>
        <div class="container-ft">
          <div class="superior-filtrada">
            <div class="kpis-ft">
              <h2>KPIs</h2>
              <div class="box-kpi-ft" style="margin-top: -5px">
                <div class="kpi-sup">
                  <span class="left">
                    <p>Turno Do Curso</p>
                    <h3>NOTURNO</h3>
                  </span>
                  <span class="right">
                    <p>8 TURMAS</p>
                    <h3>61,54%</h3>
                  </span>
                </div>
                <div class="kpi-inf">
                  <span class="left">
                    <p>Modalidade Do Curso</p>
                    <h3>ONLINE (EAD)</h3>
                  </span>
                  <span class="right">
                    <p>6 TURMAS</p>
                    <h3>46,15%</h3>
                  </span>
                </div>
              </div>
            </div>
            <div class="descricao">
              <p>
                Atualmente, você tem <b>250 alunos</b> matriculados no curso de <b>Engenharia de Software</b>, totalizando <b>13 turmas</b>, sendo
                <b>4 matutinos</b>, <b>1 vespertino</b> e <b>8 noturnos</b>, onde <b>6 são na modalidade online (EAD)</b> e
                <b>7 na modalidade presencial</b>. Este é o <b>2º curso com maior índice de evasão</b>, representando cerca de
                <b>12% das matrículas totais</b>. Analise os dados de evasão desse curso com os gráficos abaixo!
              </p>
            </div>
          </div>
          <div class="inferior-filtrada">
            <div class="box-inf">
              <h2>MODALIDADE</h2>
              <div class="grafico-ft">
                <span class="chartInside">
                  <canvas width="100" height="100" id="graficoModalidade"></canvas>
                </span>
              </div>
            </div>
            <div class="box-inf" id="mensalidade">
              <h2>MENSALIDADE</h2>
              <div class="grafico-ft">
                <span class="chartInside">
                  <canvas id="graficoMensalidade"></canvas>
                </span>
              </div>
            </div>
            <div class="box-inf">
              <h2>TURNO</h2>
              <div class="grafico-ft">
                <span class="chartInside">
                  <canvas id="graficoTurno"></canvas>
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </body>
</html>

<script>
  function sair() {
    limparSessao();
  }

  // Gráfico de Barras (Modalidade)
  const ctxModalidade = document.getElementById("graficoModalidade").getContext("2d");
  const graficoModalidade = new Chart(ctxModalidade, {
    type: "bar",
    data: {
      labels: ["Online", "Presencial"],
      datasets: [
        {
          label: "Turmas (%)",
          data: [60, 40],
          backgroundColor: ["#270091", "#3F00EC"],
        },
      ],
    },
    options: {
      scales: {
        y: {
          ticks: {
            display: false,
          },
          grid: {
            display: false,
          },
        },
        x: {
          ticks: {
            color: "#ffffff",
          },
        },
      },
      plugins: {
        legend: {
          display: false,
        },
      },
    },
  });

  // Gráfico Donut (Turno)
  const ctxTurno = document.getElementById("graficoTurno").getContext("2d");
  const graficoTurno = new Chart(ctxTurno, {
    type: "doughnut",
    data: {
      labels: ["Matutino", "Vespertino", "Noturno"],
      datasets: [
        {
          label: "Turmas (%)",
          data: [30, 7, 63],
          backgroundColor: ["#270091", "#3F00EC", "#020272"],
          borderWidth: 0,
        },
      ],
    },
    options: {
      plugins: {
        legend: {
          labels: {
            color: "#ffffff",
          },
        },
      },
    },
  });

  // Gráfico de Linha (Mensalidade)
  const ctxMensalidade = document.getElementById("graficoMensalidade").getContext("2d");
  const graficoMensalidade = new Chart(ctxMensalidade, {
    type: "line",
    data: {
      labels: ["Vespertino", "Matutino", "Noturno"], 
      datasets: [
        {
          label: "Valor Mensalidade (R$)",
          data: [1200, 1050, 2100],
          borderColor: "#020272",
          backgroundColor: "rgba(2, 2, 114, 0.5)", 
          fill: false,
        },
      ],
    },
    options: {
      scales: {
        y: {
          beginAtZero: true,
          display: false,
        },
        x: {
          ticks: {
            color: "#ffffff",
          },
        },
      },
      plugins: {
        legend: {
          labels: {
            color: "#fff",
          },
        },
      },
    },
  });
</script>
